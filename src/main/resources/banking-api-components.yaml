components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  responses:
    BadRequest:
      description: Bad request - invalid input parameter
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    Unauthorized:
      description: Unauthorized - invalid credentials
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    Forbidden:
      description: Forbidden - insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    NotFound:
      description: Not found - resource doesn't exist
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    UnprocessableEntity:
      description: Unprocessable Entity - request cannot be processed
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

  schemas:
    #-------------------------------
    # Common Schemas
    #-------------------------------
    Money:
      type: object
      description: |
        Represents a monetary amount with a specific currency. Always uses high-precision
        decimal values to avoid floating-point errors in financial calculations.
      required:
        - amount
        - currencyCode
      properties:
        amount:
          type: string
          description: |
            The amount as a string to preserve decimal precision 
            (e.g., "123.45", "1000.00", "0.50").
          example: "1250.75"
        currencyCode:
          type: string
          description: |
            The ISO 4217 currency code (e.g., "USD", "EUR", "GBP").
          example: "USD"
          minLength: 3
          maxLength: 3

    PaginationMetadata:
      type: object
      description: Metadata for paginated responses
      properties:
        currentPage:
          type: integer
          description: Current page number
          example: 1
        pageSize:
          type: integer
          description: Number of items per page
          example: 20
        totalPages:
          type: integer
          description: Total number of pages
          example: 5
        totalCount:
          type: integer
          description: Total number of items across all pages
          example: 92

    ErrorResponse:
      type: object
      required:
        - status
        - message
      properties:
        status:
          type: string
          description: HTTP status code
          example: "400"
        code:
          type: string
          description: Application-specific error code
          example: "INVALID_INPUT"
        message:
          type: string
          description: Human-readable error message
          example: "Invalid input parameter"
        details:
          type: array
          description: Detailed error information
          items:
            type: object
            properties:
              field:
                type: string
                description: Field that caused the error
                example: "email"
              message:
                type: string
                description: Error message for specific field
                example: "Email address is invalid"
              code:
                type: string
                description: Validation error code
                example: "INVALID_FORMAT"

    MessageResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          description: Response message
          example: "Operation completed successfully"
        code:
          type: string
          description: Response code
          example: "SUCCESS"

    #-------------------------------
    # Authentication Schemas
    #-------------------------------
    CustomerRegistrationRequest:
      type: object
      required:
        - email
        - password
        - firstName
        - lastName
        - dateOfBirth
      properties:
        email:
          type: string
          format: email
          description: |
            Customer's email address. This will be their primary credential
            for accessing the banking system.
          example: "john.doe@example.com"
        password:
          type: string
          format: password
          description: |
            Customer's chosen password. Must be at least 8 characters long with 
            at least one uppercase letter, one lowercase letter, one number,
            and one special character.
          example: "SecureP@ss123"
          minLength: 8
        firstName:
          type: string
          description: |
            Customer's legal first name as it appears on official identification
            documents.
          example: "John"
          minLength: 1
          maxLength: 100
        lastName:
          type: string
          description: |
            Customer's legal last name/surname as it appears on official
            identification documents.
          example: "Doe"
          minLength: 1
          maxLength: 100
        middleName:
          type: string
          description: |
            Customer's middle name, if applicable. Optional field.
          example: "Robert"
          maxLength: 100
        dateOfBirth:
          type: string
          format: date
          description: |
            Customer's date of birth in YYYY-MM-DD format. Must be at least
            18 years old to open an account.
          example: "1985-03-15"
        phoneNumber:
          type: string
          description: |
            Customer's primary phone number with country code, used for
            authentication and notifications.
          example: "+12025550179"
        gender:
          type: string
          enum: ["M", "F", "Other", "Prefer not to say"]
          description: |
            Customer's gender. Used for KYC purposes and official documentation.
          example: "M"
        nationality:
          type: string
          description: |
            Customer's country of nationality as an ISO 3166-1 alpha-2 country code.
          example: "US"
          minLength: 2
          maxLength: 2
        preferredLanguage:
          type: string
          description: |
            Customer's preferred language for communications, as an ISO 639-1 language code.
          example: "en"
          default: "en"
          minLength: 2
          maxLength: 2
        referralCode:
          type: string
          description: |
            Referral code if customer was referred by an existing customer.
          example: "REF123456"

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: |
            Customer's email address used during registration.
          example: "john.doe@example.com"
        password:
          type: string
          format: password
          description: |
            Customer's password.
          example: "SecureP@ss123"
        deviceInfo:
          type: object
          description: |
            Information about the device used for login, used for security monitoring.
          properties:
            deviceId:
              type: string
              description: |
                Unique identifier for the device.
              example: "D789-XYZ-123456"
            deviceModel:
              type: string
              description: |
                Model name or number of the device.
              example: "iPhone 13"
            operatingSystem:
              type: string
              description: |
                Operating system and version.
              example: "iOS 15.4"
            appVersion:
              type: string
              description: |
                Version of the mobile banking app.
              example: "2.1.5"

    ForgotPasswordRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          description: |
            Email address associated with the account.
          example: "john.doe@example.com"

    ResetPasswordRequest:
      type: object
      required:
        - email
        - token
        - newPassword
      properties:
        email:
          type: string
          format: email
          description: |
            Email address associated with the account.
          example: "john.doe@example.com"
        token:
          type: string
          description: |
            Token received via email for password reset.
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        newPassword:
          type: string
          format: password
          description: |
            New password. Must meet security requirements.
          example: "NewSecureP@ss456"
          minLength: 8

    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          description: |
            Refresh token received during authentication.
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    AuthResponse:
      type: object
      required:
        - token
        - refreshToken
        - expiresIn
        - tokenType
      properties:
        token:
          type: string
          description: |
            JWT access token for API authentication.
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        refreshToken:
          type: string
          description: |
            Token used to refresh the access token when it expires.
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        expiresIn:
          type: integer
          description: |
            Token expiration time in seconds.
          example: 3600
        tokenType:
          type: string
          description: |
            Type of token, always "Bearer".
          example: "Bearer"
        customerId:
          type: string
          format: uuid
          description: |
            Unique identifier for the customer.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"

    #-------------------------------
    # Customer Schemas
    #-------------------------------
    CustomerProfileResponse:
      type: object
      description: |
        Complete profile information for the authenticated customer.
      required:
        - id
        - customerNumber
        - firstName
        - lastName
        - email
        - status
        - verificationStatus
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for the customer.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        customerNumber:
          type: string
          description: |
            Human-readable customer reference number.
          example: "CUS20231234"
        firstName:
          type: string
          description: |
            Customer's first name.
          example: "John"
        middleName:
          type: string
          description: |
            Customer's middle name, if provided.
          example: "Robert"
        lastName:
          type: string
          description: |
            Customer's last name.
          example: "Doe"
        fullName:
          type: string
          description: |
            Customer's full name, formatted according to conventions.
          example: "John Robert Doe"
        dateOfBirth:
          type: string
          format: date
          description: |
            Customer's date of birth.
          example: "1985-03-15"
        gender:
          type: string
          enum: ["M", "F", "Other", "Prefer not to say"]
          description: |
            Customer's gender.
          example: "M"
        email:
          type: string
          format: email
          description: |
            Customer's primary email address.
          example: "john.doe@example.com"
        status:
          type: string
          enum: ["active", "inactive", "dormant", "suspended", "banned", "deceased"]
          description: |
            Current status of the customer account.
          example: "active"
        verificationStatus:
          type: string
          enum: ["notStarted", "inProgress", "approved", "rejected", "additionalInfoRequired"]
          description: |
            KYC verification status. Determines what banking features are available.
          example: "approved"
        customerType:
          type: string
          enum: ["individual", "business", "joint"]
          description: |
            Type of customer account.
          example: "individual"
        segment:
          type: string
          enum: ["standard", "premium", "vip", "corporate", "employee"]
          description: |
            Customer segment, determining service levels and available features.
          example: "standard"
        nationality:
          type: string
          description: |
            Customer's country of nationality (ISO 3166-1 alpha-2).
          example: "US"
        countryOfResidence:
          type: string
          description: |
            Customer's current country of residence (ISO 3166-1 alpha-2).
          example: "US"
        preferredLanguage:
          type: string
          description: |
            Preferred language for communications (ISO 639-1).
          example: "en"
        lastLoginTimestamp:
          type: string
          format: date-time
          description: |
            Date and time of last successful login.
          example: "2023-03-20T08:25:13Z"
        createdAt:
          type: string
          format: date-time
          description: |
            When the customer account was created.
          example: "2022-10-15T14:30:00Z"
        businessDetails:
          type: object
          description: |
            Details for business accounts. Only present for business customers.
          properties:
            businessName:
              type: string
              description: |
                Registered business name.
              example: "Acme Corporation"
            businessType:
              type: string
              description: |
                Type of business or industry classification.
              example: "Technology"
            registrationNumber:
              type: string
              description: |
                Official registration number.
              example: "B12345678"
            incorporationDate:
              type: string
              format: date
              description: |
                Date when the business was incorporated.
              example: "2015-06-12"

    CustomerProfileUpdateRequest:
      type: object
      description: |
        Request to update customer profile information.
      properties:
        firstName:
          type: string
          description: |
            Customer's first name.
          example: "John"
          minLength: 1
          maxLength: 100
        middleName:
          type: string
          description: |
            Customer's middle name.
          example: "Robert"
          maxLength: 100
        lastName:
          type: string
          description: |
            Customer's last name.
          example: "Doe"
          minLength: 1
          maxLength: 100
        preferredLanguage:
          type: string
          description: |
            Preferred language for communications (ISO 639-1).
          example: "en"
          minLength: 2
          maxLength: 2
        countryOfResidence:
          type: string
          description: |
            Current country of residence (ISO 3166-1 alpha-2).
          example: "US"
          minLength: 2
          maxLength: 2

    CustomerContactRequest:
      type: object
      description: |
        Request to add a new contact method to customer profile.
      required:
        - type
        - contactType
      properties:
        type:
          type: string
          enum: ["phone", "email", "address"]
          description: |
            Type of contact information being added.
          example: "phone"
        contactType:
          type: string
          enum: ["primary", "secondary", "business", "emergency", "other"]
          description: |
            Purpose of this contact method.
          example: "primary"
        isPrimary:
          type: boolean
          description: |
            Whether this should be set as the primary contact of its type.
            If true, any existing primary contact of the same type will be
            downgraded to secondary.
          example: true
          default: false
        phone:
          type: object
          description: |
            Phone number details. Required when type is "phone".
          properties:
            phoneNumber:
              type: string
              description: |
                Phone number including country code.
              example: "+12025550179"
            countryCode:
              type: string
              description: |
                Country code for the phone number.
              example: "+1"
        email:
          type: object
          description: |
            Email address details. Required when type is "email".
          properties:
            emailAddress:
              type: string
              format: email
              description: |
                Email address.
              example: "john.work@example.com"
        address:
          type: object
          description: |
            Physical address details. Required when type is "address".
          properties:
            addressType:
              type: string
              enum: ["residential", "mailing", "business", "previous"]
              description: |
                Type of address.
              example: "residential"
            addressLine1:
              type: string
              description: |
                Street address, first line.
              example: "123 Main St"
            addressLine2:
              type: string
              description: |
                Street address, second line (apartment, suite, etc.).
              example: "Apt 4B"
            city:
              type: string
              description: |
                City name.
              example: "New York"
            stateProvince:
              type: string
              description: |
                State, province, or region.
              example: "NY"
            postalCode:
              type: string
              description: |
                Postal or ZIP code.
              example: "10001"
            country:
              type: string
              description: |
                Country code (ISO 3166-1 alpha-2).
              example: "US"

    CustomerContactUpdateRequest:
      type: object
      description: |
        Request to update an existing contact method.
      properties:
        contactType:
          type: string
          enum: ["primary", "secondary", "business", "emergency", "other"]
          description: |
            Purpose of this contact method.
          example: "primary"
        isPrimary:
          type: boolean
          description: |
            Whether this should be set as the primary contact of its type.
          example: true
        phone:
          type: object
          description: |
            Updated phone number details.
          properties:
            phoneNumber:
              type: string
              description: |
                Phone number including country code.
              example: "+12025550179"
            countryCode:
              type: string
              description: |
                Country code for the phone number.
              example: "+1"
        email:
          type: object
          description: |
            Updated email address details.
          properties:
            emailAddress:
              type: string
              format: email
              description: |
                Email address.
              example: "john.personal@example.com"
        address:
          type: object
          description: |
            Updated physical address details.
          properties:
            addressType:
              type: string
              enum: ["residential", "mailing", "business", "previous"]
              description: |
                Type of address.
              example: "residential"
            addressLine1:
              type: string
              description: |
                Street address, first line.
              example: "456 Oak Ave"
            addressLine2:
              type: string
              description: |
                Street address, second line (apartment, suite, etc.).
              example: "Unit 7C"
            city:
              type: string
              description: |
                City name.
              example: "Chicago"
            stateProvince:
              type: string
              description: |
                State, province, or region.
              example: "IL"
            postalCode:
              type: string
              description: |
                Postal or ZIP code.
              example: "60601"
            country:
              type: string
              description: |
                Country code (ISO 3166-1 alpha-2).
              example: "US"

    CustomerContactResponse:
      type: object
      description: |
        Response containing details of a customer contact method.
      required:
        - id
        - type
        - contactType
        - isPrimary
        - isVerified
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for this contact method.
          example: "a47ac10b-58cc-4372-a567-0e02b2c3d479"
        type:
          type: string
          enum: ["phone", "email", "address"]
          description: |
            Type of contact information.
          example: "phone"
        contactType:
          type: string
          enum: ["primary", "secondary", "business", "emergency", "other"]
          description: |
            Purpose of this contact method.
          example: "primary"
        isPrimary:
          type: boolean
          description: |
            Whether this is the primary contact of its type.
          example: true
        isVerified:
          type: boolean
          description: |
            Whether this contact method has been verified.
          example: true
        verifiedAt:
          type: string
          format: date-time
          description: |
            When this contact method was verified.
          example: "2022-10-16T09:15:00Z"
        createdAt:
          type: string
          format: date-time
          description: |
            When this contact method was added.
          example: "2022-10-15T14:30:00Z"
        phone:
          type: object
          description: |
            Phone number details. Present when type is "phone".
          properties:
            phoneNumber:
              type: string
              description: |
                Full phone number including country code.
              example: "+12025550179"
            countryCode:
              type: string
              description: |
                Country code for the phone number.
              example: "+1"
            formattedNumber:
              type: string
              description: |
                Formatted phone number for display.
              example: "(202) 555-0179"
        email:
          type: object
          description: |
            Email address details. Present when type is "email".
          properties:
            emailAddress:
              type: string
              format: email
              description: |
                Email address.
              example: "john.work@example.com"
        address:
          type: object
          description: |
            Physical address details. Present when type is "address".
          properties:
            addressType:
              type: string
              enum: ["residential", "mailing", "business", "previous"]
              description: |
                Type of address.
              example: "residential"
            addressLine1:
              type: string
              description: |
                Street address, first line.
              example: "123 Main St"
            addressLine2:
              type: string
              description: |
                Street address, second line.
              example: "Apt 4B"
            city:
              type: string
              description: |
                City name.
              example: "New York"
            stateProvince:
              type: string
              description: |
                State, province, or region.
              example: "NY"
            postalCode:
              type: string
              description: |
                Postal or ZIP code.
              example: "10001"
            country:
              type: string
              description: |
                Country code (ISO 3166-1 alpha-2).
              example: "US"
            formattedAddress:
              type: string
              description: |
                Complete formatted address for display.
              example: "123 Main St, Apt 4B, New York, NY 10001, US"

    CustomerContactsResponse:
      type: object
      description: |
        Response containing all contact methods for a customer.
      required:
        - phones
        - emails
        - addresses
      properties:
        phones:
          type: array
          description: |
            List of phone numbers.
          items:
            $ref: '#/components/schemas/CustomerContactResponse'
        emails:
          type: array
          description: |
            List of email addresses.
          items:
            $ref: '#/components/schemas/CustomerContactResponse'
        addresses:
          type: array
          description: |
            List of physical addresses.
          items:
            $ref: '#/components/schemas/CustomerContactResponse'

    IdentificationDocumentUploadRequest:
      type: object
      description: |
        Request to upload an identification document.
      required:
        - type
        - documentNumber
        - issuingCountry
        - issueDate
        - expiryDate
        - files
      properties:
        type:
          type: string
          enum: ["passport", "nationalId", "driversLicense", "residencePermit", "birthCertificate", "other"]
          description: |
            Type of identification document.
          example: "passport"
        documentNumber:
          type: string
          description: |
            Identification number on the document.
          example: "P1234567"
        issuingCountry:
          type: string
          description: |
            Country that issued the document (ISO 3166-1 alpha-2).
          example: "US"
        issuingAuthority:
          type: string
          description: |
            Authority that issued the document.
          example: "Department of State"
        issueDate:
          type: string
          format: date
          description: |
            Date when the document was issued.
          example: "2018-05-20"
        expiryDate:
          type: string
          format: date
          description: |
            Date when the document expires.
          example: "2028-05-19"
        files:
          type: array
          description: |
            Document files to upload (front, back, selfie, etc.).
          items:
            type: object
            required:
              - fileType
              - file
            properties:
              fileType:
                type: string
                enum: ["front", "back", "selfie", "signature", "other"]
                description: |
                  Type of document file.
                example: "front"
              file:
                type: string
                format: binary
                description: |
                  The document file to upload (JPEG, PNG, or PDF).

    IdentificationDocumentResponse:
      type: object
      description: |
        Response containing details of an identification document.
      required:
        - id
        - type
        - documentNumber
        - issuingCountry
        - issueDate
        - expiryDate
        - verificationStatus
        - documentFiles
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for this document.
          example: "b47ac10b-58cc-4372-a567-0e02b2c3d479"
        type:
          type: string
          enum: ["passport", "nationalId", "driversLicense", "residencePermit", "birthCertificate", "other"]
          description: |
            Type of identification document.
          example: "passport"
        documentNumber:
          type: string
          description: |
            Identification number on the document.
          example: "P1234567"
        issuingCountry:
          type: string
          description: |
            Country that issued the document (ISO 3166-1 alpha-2).
          example: "US"
        issuingAuthority:
          type: string
          description: |
            Authority that issued the document.
          example: "Department of State"
        issueDate:
          type: string
          format: date
          description: |
            Date when the document was issued.
          example: "2018-05-20"
        expiryDate:
          type: string
          format: date
          description: |
            Date when the document expires.
          example: "2028-05-19"
        verificationStatus:
          type: string
          enum: ["pending", "verified", "rejected", "expired"]
          description: |
            Current verification status of the document.
          example: "pending"
        rejectionReason:
          type: string
          description: |
            Reason for rejection, if applicable.
          example: "Document is not legible"
        documentFiles:
          type: array
          description: |
            Files associated with this document.
          items:
            type: object
            required:
              - id
              - fileType
              - fileUrl
              - fileName
              - uploadedAt
            properties:
              id:
                type: string
                format: uuid
                description: |
                  Unique identifier for this file.
                example: "c47ac10b-58cc-4372-a567-0e02b2c3d479"
              fileType:
                type: string
                enum: ["front", "back", "selfie", "signature", "other"]
                description: |
                  Type of document file.
                example: "front"
              fileUrl:
                type: string
                format: uri
                description: |
                  URL to access the file.
                example: "https://api.sdgtbanking.com/v1/documents/files/c47ac10b-58cc-4372-a567-0e02b2c3d479"
              fileName:
                type: string
                description: |
                  Original file name.
                example: "passport_front.jpg"
              mimeType:
                type: string
                description: |
                  MIME type of the file.
                example: "image/jpeg"
              fileSize:
                type: integer
                description: |
                  Size of the file in bytes.
                example: 245678
              uploadedAt:
                type: string
                format: date-time
                description: |
                  When the file was uploaded.
                example: "2022-10-15T14:35:00Z"
        createdAt:
          type: string
          format: date-time
          description: |
            When this document was added.
          example: "2022-10-15T14:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: |
            When this document was last updated.
          example: "2022-10-15T14:35:00Z"
        verifiedAt:
          type: string
          format: date-time
          description: |
            When this document was verified, if applicable.
          example: "2022-10-16T10:20:00Z"
        verifiedBy:
          type: string
          description: |
            Who verified this document, if applicable.
          example: "KYC Team"
        isExpired:
          type: boolean
          description: |
            Whether the document is expired.
          example: false

    IdentificationDocumentsResponse:
      type: object
      description: |
        Response containing all identification documents for a customer.
      required:
        - documents
      properties:
        documents:
          type: array
          description: |
            List of identification documents.
          items:
            $ref: '#/components/schemas/IdentificationDocumentResponse'

    #-------------------------------
    # Account Schemas
    #-------------------------------
    AccountCreationRequest:
      type: object
      description: |
        Request to create a new bank account.
      required:
        - type
        - currencyCode
      properties:
        type:
          type: string
          enum: ["currentAccount", "savingsAccount", "fixedDeposit", "loanAccount", "investmentAccount", "walletAccount", "foreignCurrency"]
          description: |
            Type of account to create.
          example: "savingsAccount"
        currencyCode:
          type: string
          description: |
            Currency code for the account (ISO 4217).
          example: "USD"
          minLength: 3
          maxLength: 3
        accountName:
          type: string
          description: |
            Custom name for the account.
          example: "Vacation Savings"
          maxLength: 100
        initialDeposit:
          type: string
          description: |
            Initial deposit amount as a string to preserve precision.
          example: "1000.00"
        jointCustomerIds:
          type: array
          description: |
            Customer IDs for joint account holders, if applicable.
            Used for joint accounts shared between multiple customers.
          items:
            type: string
            format: uuid
            example: "e47ac10b-58cc-4372-a567-0e02b2c3d479"
        branchCode:
          type: string
          description: |
            Code of the branch where the account is opened.
          example: "NYC001"
        productCode:
          type: string
          description: |
            Specific product code for this account type.
          example: "SAV-PREMIUM"

    AccountResponse:
      type: object
      description: |
        Basic account information.
      required:
        - id
        - accountNumber
        - type
        - currencyCode
        - status
        - currentBalance
        - availableBalance
        - openedDate
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for the account.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        accountNumber:
          type: string
          description: |
            Human-readable account number.
          example: "1234567890"
        iban:
          type: string
          description: |
            International Bank Account Number, if applicable.
          example: "US29NWBK60161331926819"
        accountName:
          type: string
          description: |
            Custom name for the account.
          example: "Vacation Savings"
        type:
          type: string
          enum: ["currentAccount", "savingsAccount", "fixedDeposit", "loanAccount", "creditCard", "investmentAccount", "walletAccount", "foreignCurrency"]
          description: |
            Type of account.
          example: "savingsAccount"
        currencyCode:
          type: string
          description: |
            Currency code (ISO 4217).
          example: "USD"
          minLength: 3
          maxLength: 3
        status:
          type: string
          enum: ["active", "inactive", "dormant", "frozen", "closed", "pending", "blocked"]
          description: |
            Current status of the account.
          example: "active"
        currentBalance:
          $ref: '#/components/schemas/Money'
        availableBalance:
          $ref: '#/components/schemas/Money'
        openedDate:
          type: string
          format: date-time
          description: |
            When the account was opened.
          example: "2022-10-15T14:30:00Z"
        lastTransactionDate:
          type: string
          format: date-time
          description: |
            When the last transaction occurred.
          example: "2023-03-25T09:15:30Z"
        interestRate:
          type: number
          format: double
          description: |
            Current interest rate as a percentage.
          example: 2.5
        createdAt:
          type: string
          format: date-time
          description: |
            When the account record was created.
          example: "2022-10-15T14:30:00Z"

    AccountDetailResponse:
      type: object
      description: |
        Detailed account information.
      allOf:
        - $ref: '#/components/schemas/AccountResponse'
        - type: object
          properties:
            reservedAmount:
              $ref: '#/components/schemas/Money'
            minimumBalance:
              $ref: '#/components/schemas/Money'
            overdraftLimit:
              $ref: '#/components/schemas/Money'
            interestCalculation:
              type: string
              enum: ["daily", "monthly", "quarterly", "annual"]
              description: |
                How interest is calculated for this account.
              example: "daily"
            penaltyRate:
              type: number
              format: double
              description: |
                Penalty rate for early withdrawals or missed payments.
              example: 5.0
            jointCustomers:
              type: array
              description: |
                List of joint account holders, if applicable.
              items:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: |
                      Customer ID.
                    example: "e47ac10b-58cc-4372-a567-0e02b2c3d479"
                  name:
                    type: string
                    description: |
                      Customer name.
                    example: "Jane Doe"
                  isPrimary:
                    type: boolean
                    description: |
                      Whether this is the primary account holder.
                    example: false
            restrictions:
              type: object
              description: |
                Any active restrictions on the account.
              properties:
                frozen:
                  type: boolean
                  description: |
                    Whether the account is completely frozen.
                  example: false
                noWithdrawals:
                  type: boolean
                  description: |
                    Whether withdrawals are blocked.
                  example: false
                noDeposits:
                  type: boolean
                  description: |
                    Whether deposits are blocked.
                  example: false
                restrictionExpiryDate:
                  type: string
                  format: date-time
                  description: |
                    When restrictions will expire, if applicable.
                  example: "2023-04-15T00:00:00Z"
                restrictionReason:
                  type: string
                  description: |
                    Reason for the restrictions.
                  example: "Suspected fraud investigation"
            linkedCards:
              type: array
              description: |
                Cards linked to this account.
              items:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: |
                      Card ID.
                    example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
                  last4:
                    type: string
                    description: |
                      Last 4 digits of the card number.
                    example: "1234"
                  type:
                    type: string
                    enum: ["debit", "credit", "prepaid", "giftCard", "virtual", "corporate"]
                    description: |
                      Type of card.
                    example: "debit"
                  status:
                    type: string
                    enum: ["active", "inactive", "blocked", "suspended", "expired", "pendingActivation", "canceled", "stolen", "lost", "damaged"]
                    description: |
                      Current status of the card.
                    example: "active"
            lastStatementDate:
              type: string
              format: date-time
              description: |
                When the last statement was generated.
              example: "2023-03-01T00:00:00Z"
            nextStatementDate:
              type: string
              format: date-time
              description: |
                When the next statement is scheduled.
              example: "2023-04-01T00:00:00Z"
            statementFrequency:
              type: integer
              description: |
                Frequency of statements in days.
              example: 30
            features:
              type: object
              description: |
                Features enabled for this account.
              properties:
                internetBanking:
                  type: boolean
                  description: |
                    Whether internet banking is enabled.
                  example: true
                mobileBanking:
                  type: boolean
                  description: |
                    Whether mobile banking is enabled.
                  example: true
                atmWithdrawals:
                  type: boolean
                  description: |
                    Whether ATM withdrawals are enabled.
                  example: true
                instantTransfers:
                  type: boolean
                  description: |
                    Whether instant transfers are enabled.
                  example: true
            branchCode:
              type: string
              description: |
                Code of the branch where the account was opened.
              example: "NYC001"
            branchName:
              type: string
              description: |
                Name of the branch where the account was opened.
              example: "New York City - Downtown"
            productCode:
              type: string
              description: |
                Specific product code for this account type.
              example: "SAV-PREMIUM"
            productName:
              type: string
              description: |
                Human-readable product name.
              example: "Premium Savings Account"
            updatedAt:
              type: string
              format: date-time
              description: |
                When the account was last updated.
              example: "2023-03-25T09:15:30Z"

    AccountsListResponse:
      type: object
      description: |
        List of customer accounts.
      required:
        - accounts
      properties:
        accounts:
          type: array
          description: |
            List of accounts.
          items:
            $ref: '#/components/schemas/AccountResponse'

    AccountUpdateRequest:
      type: object
      description: |
        Request to update account settings.
      properties:
        accountName:
          type: string
          description: |
            New custom name for the account.
          example: "Emergency Fund"
          maxLength: 100
        features:
          type: object
          description: |
            Features to enable or disable.
          properties:
            internetBanking:
              type: boolean
              description: |
                Whether internet banking is enabled.
              example: true
            mobileBanking:
              type: boolean
              description: |
                Whether mobile banking is enabled.
              example: true
            atmWithdrawals:
              type: boolean
              description: |
                Whether ATM withdrawals are enabled.
              example: true
            instantTransfers:
              type: boolean
              description: |
                Whether instant transfers are enabled.
              example: true

    AccountCloseRequest:
      type: object
      description: |
        Request to close an account.
      required:
        - reason
      properties:
        reason:
          type: string
          enum: ["customerRequest", "fraud", "deceased", "regulation", "delinquency", "merged", "other"]
          description: |
            Reason for closing the account.
          example: "customerRequest"
        notes:
          type: string
          description: |
            Additional notes about the closure.
          example: "Customer is moving to another country"
          maxLength: 500
        transferRemainingFunds:
          type: boolean
          description: |
            Whether to transfer any remaining funds.
          example: true
          default: false
        destinationAccountId:
          type: string
          format: uuid
          description: |
            Account ID to transfer remaining funds to.
            Required if transferRemainingFunds is true.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"

    AccountBalanceResponse:
      type: object
      description: |
        Account balance information.
      required:
        - accountId
        - accountNumber
        - currentBalance
        - availableBalance
        - timestamp
      properties:
        accountId:
          type: string
          format: uuid
          description: |
            Unique identifier for the account.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        accountNumber:
          type: string
          description: |
            Human-readable account number.
          example: "1234567890"
        accountName:
          type: string
          description: |
            Custom name for the account.
          example: "Vacation Savings"
        currencyCode:
          type: string
          description: |
            Currency code (ISO 4217).
          example: "USD"
        currentBalance:
          $ref: '#/components/schemas/Money'
        availableBalance:
          $ref: '#/components/schemas/Money'
        reservedAmount:
          $ref: '#/components/schemas/Money'
        minimumBalance:
          $ref: '#/components/schemas/Money'
        overdraftLimit:
          $ref: '#/components/schemas/Money'
        overdraftAvailable:
          $ref: '#/components/schemas/Money'
        timestamp:
          type: string
          format: date-time
          description: |
            When this balance information was retrieved.
          example: "2023-03-25T09:30:00Z"

    AccountStatementsResponse:
      type: object
      description: |
        List of available account statements.
      required:
        - statements
      properties:
        statements:
          type: array
          description: |
            List of statements.
          items:
            type: object
            required:
              - id
              - periodStart
              - periodEnd
              - generatedDate
              - fileSize
            properties:
              id:
                type: string
                format: uuid
                description: |
                  Unique identifier for the statement.
                example: "e47ac10b-58cc-4372-a567-0e02b2c3d479"
              periodStart:
                type: string
                format: date
                description: |
                  Start date for the statement period.
                example: "2023-02-01"
              periodEnd:
                type: string
                format: date
                description: |
                  End date for the statement period.
                example: "2023-02-28"
              generatedDate:
                type: string
                format: date-time
                description: |
                  When the statement was generated.
                example: "2023-03-01T00:15:00Z"
              fileSize:
                type: integer
                description: |
                  Size of the statement file in bytes.
                example: 256789
              openingBalance:
                $ref: '#/components/schemas/Money'
              closingBalance:
                $ref: '#/components/schemas/Money'
              downloadUrl:
                type: string
                format: uri
                description: |
                  URL to download the statement.
                example: "https://api.sdgtbanking.com/v1/accounts/d47ac10b-58cc-4372-a567-0e02b2c3d479/statement/e47ac10b-58cc-4372-a567-0e02b2c3d479"

    #-------------------------------
    # Payee Schemas
    #-------------------------------
    PayeeCreationRequest:
      type: object
      description: |
        Request to create a new payee.
      required:
        - name
        - accountNumber
        - type
        - category
      properties:
        name:
          type: string
          description: |
            Name of the payee.
          example: "City Power & Light"
          minLength: 1
          maxLength: 100
        description:
          type: string
          description: |
            Optional description or notes about this payee.
          example: "Electricity bill payment"
          maxLength: 500
        accountNumber:
          type: string
          description: |
            Account number for the payee.
          example: "987654321"
          minLength: 1
          maxLength: 50
        type:
          type: string
          enum: ["individual", "business", "utility", "government", "charity", "financial", "international"]
          description: |
            Type of payee.
          example: "utility"
        category:
          type: string
          enum: ["family", "friend", "shopping", "housing", "utilities", "education", "healthcare", "transportation", "entertainment", "professional", "investment", "insurance", "tax", "other"]
          description: |
            Category for organizing payees.
          example: "utilities"
        isFavorite:
          type: boolean
          description: |
            Whether this payee should be marked as a favorite.
          example: false
          default: false
        iban:
          type: string
          description: |
            International Bank Account Number, if applicable.
          example: "GB29NWBK60161331926819"
        accountHolderName:
          type: string
          description: |
            Name of the account holder if different from payee name.
          example: "City Utilities Inc."
        bankName:
          type: string
          description: |
            Name of the payee's bank.
          example: "First National Bank"
        bankCode:
          type: string
          description: |
            Bank code or identifier.
          example: "FNBUS33"
        branchCode:
          type: string
          description: |
            Branch code or identifier.
          example: "021000089"
        swiftCode:
          type: string
          description: |
            SWIFT/BIC code for international transfers.
          example: "FNBAUS33XXX"
        routingNumber:
          type: string
          description: |
            ABA routing number (for US banks).
          example: "021000021"
        address:
          type: object
          description: |
            Payee's address information.
          properties:
            addressLine1:
              type: string
              description: |
                Street address, first line.
              example: "456 Commerce St"
            addressLine2:
              type: string
              description: |
                Street address, second line.
              example: "Suite 300"
            city:
              type: string
              description: |
                City name.
              example: "Chicago"
            region:
              type: string
              description: |
                State, province, or region.
              example: "IL"
            postalCode:
              type: string
              description: |
                Postal or ZIP code.
              example: "60601"
            country:
              type: string
              description: |
                Country code (ISO 3166-1 alpha-2).
              example: "US"
        billerId:
          type: string
          description: |
            Biller ID for bill payments.
          example: "CPL001"
        consumerNumber:
          type: string
          description: |
            Customer account number with the biller.
          example: "123456-789"

    PayeeUpdateRequest:
      type: object
      description: |
        Request to update an existing payee.
      properties:
        name:
          type: string
          description: |
            Updated name of the payee.
          example: "Metropolitan Power & Utilities"
          minLength: 1
          maxLength: 100
        description:
          type: string
          description: |
            Updated description or notes.
          example: "Electricity and gas bill payments"
          maxLength: 500
        category:
          type: string
          enum: ["family", "friend", "shopping", "housing", "utilities", "education", "healthcare", "transportation", "entertainment", "professional", "investment", "insurance", "tax", "other"]
          description: |
            Updated category.
          example: "utilities"
        accountHolderName:
          type: string
          description: |
            Updated name of the account holder.
          example: "Metropolitan Utilities Corp."
        bankName:
          type: string
          description: |
            Updated name of the payee's bank.
          example: "First Union Bank"
        address:
          type: object
          description: |
            Updated address information.
          properties:
            addressLine1:
              type: string
              description: |
                Street address, first line.
              example: "789 Enterprise Blvd"
            addressLine2:
              type: string
              description: |
                Street address, second line.
              example: "Floor 15"
            city:
              type: string
              description: |
                City name.
              example: "Chicago"
            region:
              type: string
              description: |
                State, province, or region.
              example: "IL"
            postalCode:
              type: string
              description: |
                Postal or ZIP code.
              example: "60602"
            country:
              type: string
              description: |
                Country code (ISO 3166-1 alpha-2).
              example: "US"
        consumerNumber:
          type: string
          description: |
            Updated customer account number with the biller.
          example: "987654-321"

    PayeeFavoriteRequest:
      type: object
      description: |
        Request to toggle favorite status for a payee.
      required:
        - isFavorite
      properties:
        isFavorite:
          type: boolean
          description: |
            Whether the payee should be marked as a favorite.
          example: true

    PayeeResponse:
      type: object
      description: |
        Payee information.
      required:
        - id
        - name
        - accountNumber
        - type
        - category
        - isFavorite
        - isActive
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for the payee.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        name:
          type: string
          description: |
            Name of the payee.
          example: "City Power & Light"
        description:
          type: string
          description: |
            Description or notes about this payee.
          example: "Electricity bill payment"
        accountNumber:
          type: string
          description: |
            Account number for the payee.
          example: "4321"
        type:
          type: string
          enum: ["individual", "business", "utility", "government", "charity", "financial", "international"]
          description: |
            Type of payee.
          example: "utility"
        category:
          type: string
          enum: ["family", "friend", "shopping", "housing", "utilities", "education", "healthcare", "transportation", "entertainment", "professional", "investment", "insurance", "tax", "other"]
          description: |
            Category for organizing payees.
          example: "utilities"
        isFavorite:
          type: boolean
          description: |
            Whether this payee is marked as a favorite.
          example: false
        frequency:
          type: integer
          description: |
            How many times this payee has been used for transactions.
          example: 12
        iban:
          type: string
          description: |
            International Bank Account Number, if applicable.
          example: "GB29NWBK6819"
        accountHolderName:
          type: string
          description: |
            Name of the account holder if different from payee name.
          example: "City Utilities Inc."
        bankName:
          type: string
          description: |
            Name of the payee's bank.
          example: "First National Bank"
        bankCode:
          type: string
          description: |
            Bank code or identifier.
          example: "FNBUS33"
        branchCode:
          type: string
          description: |
            Branch code or identifier.
          example: "021000089"
        swiftCode:
          type: string
          description: |
            SWIFT/BIC code for international transfers.
          example: "FNBAUS33XXX"
        routingNumber:
          type: string
          description: |
            ABA routing number (for US banks).
          example: "021000021"
        address:
          type: object
          description: |
            Payee's address information.
          properties:
            addressLine1:
              type: string
              description: |
                Street address, first line.
              example: "456 Commerce St"
            addressLine2:
              type: string
              description: |
                Street address, second line.
              example: "Suite 300"
            city:
              type: string
              description: |
                City name.
              example: "Chicago"
            region:
              type: string
              description: |
                State, province, or region.
              example: "IL"
            postalCode:
              type: string
              description: |
                Postal or ZIP code.
              example: "60601"
            country:
              type: string
              description: |
                Country code (ISO 3166-1 alpha-2).
              example: "US"
        billerId:
          type: string
          description: |
            Biller ID for bill payments.
          example: "CPL001"
        consumerNumber:
          type: string
          description: |
            Customer account number with the biller.
          example: "123456-789"
        lastUsedDate:
          type: string
          format: date-time
          description: |
            When this payee was last used for a transaction.
          example: "2023-03-10T15:45:00Z"
        totalTransactionCount:
          type: integer
          description: |
            Total number of transactions made to this payee.
          example: 12
        isActive:
          type: boolean
          description: |
            Whether this payee is active and can be used.
          example: true
        isVerified:
          type: boolean
          description: |
            Whether this payee has been verified by the bank.
          example: true
        verifiedAt:
          type: string
          format: date-time
          description: |
            When this payee was verified, if applicable.
          example: "2022-10-16T10:00:00Z"
        createdAt:
          type: string
          format: date-time
          description: |
            When this payee was created.
          example: "2022-10-15T14:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: |
            When this payee was last updated.
          example: "2022-10-15T14:30:00Z"

    PayeesListResponse:
      type: object
      description: |
        List of payees.
      required:
        - payees
      properties:
        payees:
          type: array
          description: |
            List of payees.
          items:
            $ref: '#/components/schemas/PayeeResponse'

    PayeeCategoriesResponse:
      type: object
      description: |
        List of payee categories.
      required:
        - categories
      properties:
        categories:
          type: array
          description: |
            List of available categories.
          items:
            type: object
            properties:
              code:
                type: string
                description: |
                  Category code.
                example: "utilities"
              name:
                type: string
                description: |
                  Display name for the category.
                example: "Utilities"
              description:
                type: string
                description: |
                  Description of the category.
                example: "Electricity, gas, water, and other utility providers"
              icon:
                type: string
                description: |
                  Icon identifier for UI display.
                example: "lightbulb"

    #-------------------------------
    # Transfer Schemas
    #-------------------------------
    TransferCreationRequest:
      type: object
      description: |
        Request to create a new money transfer.
      required:
        - sourceAccountId
        - amount
        - currencyCode
      properties:
        sourceAccountId:
          type: string
          format: uuid
          description: |
            ID of the account to transfer from.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        destinationAccountId:
          type: string
          format: uuid
          description: |
            ID of the account to transfer to (for internal transfers).
            Either destinationAccountId or payeeId must be provided.
          example: "e47ac10b-58cc-4372-a567-0e02b2c3d479"
        payeeId:
          type: string
          format: uuid
          description: |
            ID of the payee to transfer to (for external transfers).
            Either destinationAccountId or payeeId must be provided.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        type:
          type: string
          enum: ["internal", "domestic", "international", "ownAccounts", "billPayment", "topUp", "investment", "loan"]
          description: |
            Type of transfer.
          example: "internal"
          default: "internal"
        amount:
          type: string
          description: |
            Amount to transfer as a string to preserve precision.
          example: "150.75"
        currencyCode:
          type: string
          description: |
            Currency code for the transfer (ISO 4217).
          example: "USD"
          minLength: 3
          maxLength: 3
        feeBearer:
          type: string
          enum: ["sender", "receiver", "shared"]
          description: |
            Who bears the transfer fee.
          example: "sender"
          default: "sender"
        reference:
          type: string
          description: |
            Customer reference for the transfer.
          example: "March rent payment"
          maxLength: 140
        description:
          type: string
          description: |
            Additional description or notes.
          example: "Payment for apartment 4B, March 2023"
          maxLength: 255
        purpose:
          type: string
          description: |
            Purpose of the transfer, especially for international transfers.
          example: "Living Expenses"
          maxLength: 100
        remittanceInfo:
          type: object
          description: |
            Additional information for compliance and reporting.
          properties:
            sourceOfFunds:
              type: string
              description: |
                Source of the funds being transferred.
              example: "Salary"
            relationship:
              type: string
              description: |
                Relationship to the recipient.
              example: "Landlord"

    TransferResponse:
      type: object
      description: |
        Basic transfer information.
      required:
        - id
        - referenceNumber
        - sourceAccountId
        - beneficiaryName
        - type
        - amount
        - totalAmount
        - status
        - initiatedAt
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for the transfer.
          example: "g47ac10b-58cc-4372-a567-0e02b2c3d479"
        referenceNumber:
          type: string
          description: |
            Human-readable reference number.
          example: "TRF20230326001"
        sourceAccountId:
          type: string
          format: uuid
          description: |
            ID of the source account.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        sourceAccountNumber:
          type: string
          description: |
            Account number of the source account.
          example: "1234567890"
        destinationAccountId:
          type: string
          format: uuid
          description: |
            ID of the destination account (for internal transfers).
          example: "e47ac10b-58cc-4372-a567-0e02b2c3d479"
        destinationAccountNumber:
          type: string
          description: |
            Account number of the destination account.
          example: "0987654321"
        payeeId:
          type: string
          format: uuid
          description: |
            ID of the payee (for external transfers).
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        beneficiaryName:
          type: string
          description: |
            Name of the transfer beneficiary.
          example: "Jane Smith"
        type:
          type: string
          enum: ["internal", "domestic", "international", "ownAccounts", "billPayment", "topUp", "investment", "loan", "scheduled"]
          description: |
            Type of transfer.
          example: "internal"
        amount:
          $ref: '#/components/schemas/Money'
        fee:
          $ref: '#/components/schemas/Money'
        totalAmount:
          $ref: '#/components/schemas/Money'
        feeBearer:
          type: string
          enum: ["sender", "receiver", "shared"]
          description: |
            Who bears the transfer fee.
          example: "sender"
        reference:
          type: string
          description: |
            Customer reference for the transfer.
          example: "March rent payment"
        status:
          type: string
          enum: ["draft", "pending", "processing", "completed", "failed", "canceled", "scheduled", "partiallyCompleted", "returned", "rejected"]
          description: |
            Current status of the transfer.
          example: "pending"
        initiatedAt:
          type: string
          format: date-time
          description: |
            When the transfer was initiated.
          example: "2023-03-26T10:30:00Z"
        processedAt:
          type: string
          format: date-time
          description: |
            When the transfer was processed by the system.
          example: "2023-03-26T10:31:15Z"
        completedAt:
          type: string
          format: date-time
          description: |
            When the transfer was completed.
          example: "2023-03-26T10:35:00Z"
        transactionId:
          type: string
          format: uuid
          description: |
            ID of the associated transaction.
          example: "h47ac10b-58cc-4372-a567-0e02b2c3d479"

    TransferDetailResponse:
      type: object
      description: |
        Detailed transfer information.
      allOf:
        - $ref: '#/components/schemas/TransferResponse'
        - type: object
          properties:
            description:
              type: string
              description: |
                Detailed description of the transfer.
              example: "Payment for apartment 4B, March 2023"
            purpose:
              type: string
              description: |
                Purpose of the transfer.
              example: "Living Expenses"
            statusReason:
              type: string
              description: |
                Reason for the current status, especially for failed or rejected transfers.
              example: "Insufficient funds"
            failureReason:
              type: string
              description: |
                Detailed reason for failure, if applicable.
              example: "Account balance too low to cover transfer amount plus fees"
            retryCount:
              type: integer
              description: |
                Number of retry attempts, if applicable.
              example: 0
            isRecurring:
              type: boolean
              description: |
                Whether this is part of a recurring transfer.
              example: false
            scheduledTransferId:
              type: string
              format: uuid
              description: |
                ID of the parent scheduled transfer, if applicable.
              example: "j47ac10b-58cc-4372-a567-0e02b2c3d479"
            scheduledDate:
              type: string
              format: date-time
              description: |
                When the transfer is scheduled to execute, if applicable.
              example: "2023-03-26T10:00:00Z"
            recipientBankDetails:
              type: object
              description: |
                Details of the recipient's bank for external transfers.
              properties:
                bankName:
                  type: string
                  description: |
                    Name of the recipient's bank.
                  example: "First National Bank"
                bankCode:
                  type: string
                  description: |
                    Bank code or identifier.
                  example: "FNBUS33"
                branchCode:
                  type: string
                  description: |
                    Branch code or identifier.
                  example: "021000089"
                swiftCode:
                  type: string
                  description: |
                    SWIFT/BIC code for international transfers.
                  example: "FNBAUS33XXX"
            internationalDetails:
              type: object
              description: |
                Additional details for international transfers.
              properties:
                sourceCountry:
                  type: string
                  description: |
                    Country sending from (ISO 3166-1 alpha-2).
                  example: "US"
                destinationCountry:
                  type: string
                  description: |
                    Country sending to (ISO 3166-1 alpha-2).
                  example: "GB"
                exchangeRate:
                  type: string
                  description: |
                    Exchange rate applied to the transfer.
                  example: "1.3245"
                remittancePurpose:
                  type: string
                  description: |
                    Purpose code for regulatory reporting.
                  example: "FAMILY_SUPPORT"
            complianceChecked:
              type: boolean
              description: |
                Whether the transfer has been checked for compliance.
              example: true
            needsApproval:
              type: boolean
              description: |
                Whether the transfer requires manual approval.
              example: false
            approvedBy:
              type: string
              description: |
                Who approved the transfer, if applicable.
              example: "Jane Manager"
            approvedAt:
              type: string
              format: date-time
              description: |
                When the transfer was approved, if applicable.
              example: "2023-03-26T10:29:45Z"
            createdAt:
              type: string
              format: date-time
              description: |
                When the transfer record was created.
              example: "2023-03-26T10:25:00Z"
            updatedAt:
              type: string
              format: date-time
              description: |
                When the transfer was last updated.
              example: "2023-03-26T10:35:00Z"

    TransfersListResponse:
      type: object
      description: |
        List of transfers.
      required:
        - transfers
        - pagination
      properties:
        transfers:
          type: array
          description: |
            List of transfers.
          items:
            $ref: '#/components/schemas/TransferResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMetadata'

    TransferCancelRequest:
      type: object
      description: |
        Request to cancel a transfer.
      required:
        - reason
      properties:
        reason:
          type: string
          description: |
            Reason for canceling the transfer.
          example: "Incorrect amount"
          maxLength: 200

    ScheduledTransferRequest:
      type: object
      description: |
        Request to schedule a future transfer.
      required:
        - sourceAccountId
        - amount
        - currencyCode
        - scheduledDate
      properties:
        sourceAccountId:
          type: string
          format: uuid
          description: |
            ID of the account to transfer from.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        destinationAccountId:
          type: string
          format: uuid
          description: |
            ID of the account to transfer to (for internal transfers).
            Either destinationAccountId or payeeId must be provided.
          example: "e47ac10b-58cc-4372-a567-0e02b2c3d479"
        payeeId:
          type: string
          format: uuid
          description: |
            ID of the payee to transfer to (for external transfers).
            Either destinationAccountId or payeeId must be provided.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        type:
          type: string
          enum: ["internal", "domestic", "international", "ownAccounts", "billPayment", "topUp", "investment", "loan"]
          description: |
            Type of transfer.
          example: "internal"
          default: "internal"
        amount:
          type: string
          description: |
            Amount to transfer as a string to preserve precision.
          example: "150.75"
        currencyCode:
          type: string
          description: |
            Currency code for the transfer (ISO 4217).
          example: "USD"
          minLength: 3
          maxLength: 3
        scheduledDate:
          type: string
          format: date-time
          description: |
            When the transfer should be executed.
          example: "2023-04-15T10:00:00Z"
        reference:
          type: string
          description: |
            Customer reference for the transfer.
          example: "April rent payment"
          maxLength: 140
        description:
          type: string
          description: |
            Additional description or notes.
          example: "Payment for apartment 4B, April 2023"
          maxLength: 255

    RecurringTransferRequest:
      type: object
      description: |
        Request to create a recurring transfer.
      required:
        - sourceAccountId
        - amount
        - currencyCode
        - frequency
        - interval
      properties:
        sourceAccountId:
          type: string
          format: uuid
          description: |
            ID of the account to transfer from.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        destinationAccountId:
          type: string
          format: uuid
          description: |
            ID of the account to transfer to (for internal transfers).
            Either destinationAccountId or payeeId must be provided.
          example: "e47ac10b-58cc-4372-a567-0e02b2c3d479"
        payeeId:
          type: string
          format: uuid
          description: |
            ID of the payee to transfer to (for external transfers).
            Either destinationAccountId or payeeId must be provided.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        type:
          type: string
          enum: ["internal", "domestic", "international", "ownAccounts", "billPayment", "topUp", "investment", "loan"]
          description: |
            Type of transfer.
          example: "internal"
          default: "internal"
        amount:
          type: string
          description: |
            Amount to transfer as a string to preserve precision.
          example: "150.75"
        currencyCode:
          type: string
          description: |
            Currency code for the transfer (ISO 4217).
          example: "USD"
          minLength: 3
          maxLength: 3
        frequency:
          type: string
          enum: ["daily", "weekly", "monthly", "quarterly", "annual", "custom"]
          description: |
            How often the transfer should recur.
          example: "monthly"
        interval:
          type: integer
          description: |
            Interval between transfers. For example, 2 with a frequency of "weekly"
            means every 2 weeks.
          example: 1
          minimum: 1
        dayOfMonth:
          type: integer
          description: |
            Day of month for monthly transfers. Required for monthly frequency.
          example: 15
          minimum: 1
          maximum: 31
        daysOfWeek:
          type: array
          description: |
            Days of week for weekly transfers. Required for weekly frequency.
            0 = Sunday, 1 = Monday, ..., 6 = Saturday.
          items:
            type: integer
            minimum: 0
            maximum: 6
          example: [1, 4]  # Monday and Thursday
        startDate:
          type: string
          format: date-time
          description: |
            When the recurring transfer should start.
          example: "2023-04-15T10:00:00Z"

        endDate:
          type: string
          format: date-time
          description: |
            When the recurring transfer should end, if applicable.
          example: "2023-12-15T10:00:00Z"
        reference:
          type: string
          description: |
            Customer reference for the transfer.
          example: "Monthly rent payment"
          maxLength: 140
        description:
          type: string
          description: |
            Additional description or notes.
          example: "Payment for apartment 4B"
          maxLength: 255

    RecurringTransferUpdateRequest:
      type: object
      description: |
        Request to update a recurring transfer.
      properties:
        amount:
          type: string
          description: |
            Updated amount to transfer.
          example: "175.50"
        frequency:
          type: string
          enum: ["daily", "weekly", "monthly", "quarterly", "annual", "custom"]
          description: |
            Updated frequency.
          example: "monthly"
        interval:
          type: integer
          description: |
            Updated interval between transfers.
          example: 1
          minimum: 1
        dayOfMonth:
          type: integer
          description: |
            Updated day of month for monthly transfers.
          example: 15
          minimum: 1
          maximum: 31
        daysOfWeek:
          type: array
          description: |
            Updated days of week for weekly transfers.
          items:
            type: integer
            minimum: 0
            maximum: 6
          example: [1, 4]
        endDate:
          type: string
          format: date-time
          description: |
            Updated end date, if applicable.
          example: "2023-12-15T10:00:00Z"
        reference:
          type: string
          description: |
            Updated customer reference.
          example: "Monthly rent payment - updated amount"
          maxLength: 140
        description:
          type: string
          description: |
            Updated description or notes.
          example: "Updated payment for apartment 4B"
          maxLength: 255

    RecurringTransferResponse:
      type: object
      description: |
        Recurring transfer information.
      required:
        - id
        - sourceAccountId
        - amount
        - frequency
        - interval
        - nextExecutionDate
        - status
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for the recurring transfer.
          example: "j47ac10b-58cc-4372-a567-0e02b2c3d479"
        sourceAccountId:
          type: string
          format: uuid
          description: |
            ID of the source account.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        sourceAccountNumber:
          type: string
          description: |
            Account number of the source account.
          example: "1234567890"
        destinationAccountId:
          type: string
          format: uuid
          description: |
            ID of the destination account (for internal transfers).
          example: "e47ac10b-58cc-4372-a567-0e02b2c3d479"
        destinationAccountNumber:
          type: string
          description: |
            Account number of the destination account.
          example: "0987654321"
        payeeId:
          type: string
          format: uuid
          description: |
            ID of the payee (for external transfers).
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        beneficiaryName:
          type: string
          description: |
            Name of the transfer beneficiary.
          example: "Jane Smith"
        type:
          type: string
          enum: ["internal", "domestic", "international", "ownAccounts", "billPayment", "topUp", "investment", "loan"]
          description: |
            Type of transfer.
          example: "internal"
        amount:
          $ref: '#/components/schemas/Money'
        frequency:
          type: string
          enum: ["daily", "weekly", "monthly", "quarterly", "annual", "custom"]
          description: |
            How often the transfer recurs.
          example: "monthly"
        interval:
          type: integer
          description: |
            Interval between transfers.
          example: 1
        dayOfMonth:
          type: integer
          description: |
            Day of month for monthly transfers. Present for monthly frequency.
          example: 15
        daysOfWeek:
          type: array
          description: |
            Days of week for weekly transfers. Present for weekly frequency.
          items:
            type: integer
          example: [1, 4]
        startDate:
          type: string
          format: date-time
          description: |
            When the recurring transfer started.
          example: "2023-04-15T10:00:00Z"
        endDate:
          type: string
          format: date-time
          description: |
            When the recurring transfer will end, if applicable.
          example: "2023-12-15T10:00:00Z"
        nextExecutionDate:
          type: string
          format: date-time
          description: |
            When the next transfer will be executed.
          example: "2023-05-15T10:00:00Z"
        lastExecutionDate:
          type: string
          format: date-time
          description: |
            When the last transfer was executed, if any.
          example: "2023-04-15T10:00:00Z"
        executionCount:
          type: integer
          description: |
            Number of times this recurring transfer has been executed.
          example: 1
        reference:
          type: string
          description: |
            Customer reference for the transfer.
          example: "Monthly rent payment"
        description:
          type: string
          description: |
            Additional description or notes.
          example: "Payment for apartment 4B"
        status:
          type: string
          enum: ["active", "paused", "completed", "canceled"]
          description: |
            Current status of the recurring transfer.
          example: "active"
        createdAt:
          type: string
          format: date-time
          description: |
            When the recurring transfer was created.
          example: "2023-04-01T09:30:00Z"
        updatedAt:
          type: string
          format: date-time
          description: |
            When the recurring transfer was last updated.
          example: "2023-04-01T09:30:00Z"

    RecurringTransfersListResponse:
      type: object
      description: |
        List of recurring transfers.
      required:
        - recurringTransfers
      properties:
        recurringTransfers:
          type: array
          description: |
            List of recurring transfers.
          items:
            $ref: '#/components/schemas/RecurringTransferResponse'

    #-------------------------------
    # Transaction Schemas
    #-------------------------------
    TransactionResponse:
      type: object
      description: |
        Basic transaction information.
      required:
        - id
        - transactionReference
        - accountId
        - type
        - description
        - amount
        - status
        - initiatedAt
        - timestamp
        - referenceId
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for the transaction.
          example: "h47ac10b-58cc-4372-a567-0e02b2c3d479"
        transactionReference:
          type: string
          description: |
            Human-readable reference number.
          example: "TXN20230326001"
        accountId:
          type: string
          format: uuid
          description: |
            ID of the account associated with this transaction.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        accountNumber:
          type: string
          description: |
            Account number.
          example: "1234567890"
        type:
          type: string
          enum: ["deposit", "withdrawal", "transfer", "payment", "fee", "interest", "reversal", "adjustment", "loan", "refund", "exchange"]
          description: |
            Type of transaction.
          example: "transfer"
        category:
          type: string
          enum: ["salary", "utilities", "shopping", "travel", "food", "healthcare", "education", "entertainment", "transportation", "housing", "investment", "government"]
          description: |
            Category for reporting and analytics.
          example: "housing"
        description:
          type: string
          description: |
            Transaction description.
          example: "Transfer to Jane Smith"
        amount:
          $ref: '#/components/schemas/Money'
        status:
          type: string
          enum: ["pending", "completed", "failed", "canceled", "disputed", "reversed", "held", "clearing"]
          description: |
            Current status of the transaction.
          example: "completed"
        counterpartyName:
          type: string
          description: |
            Name of the counterparty in the transaction.
          example: "Jane Smith"
        initiatedAt:
          type: string
          format: date-time
          description: |
            When the transaction was initiated.
          example: "2023-03-26T10:30:00Z"
        completedAt:
          type: string
          format: date-time
          description: |
            When the transaction was completed.
          example: "2023-03-26T10:35:00Z"
        timestamp:
          type: string
          format: date-time
          description: |
            Timestamp of the transaction.
          example: "2023-03-26T10:30:00Z"
        referenceId:
          type: string
          format: uuid
          description: |
            Reference ID for the transaction.
          example: "g47ac10b-58cc-4372-a567-0e02b2c3d479"

    TransactionDetailResponse:
      type: object
      description: |
        Detailed transaction information.
      allOf:
        - $ref: '#/components/schemas/TransactionResponse'
        - type: object
          properties:
            balanceAfterTransaction:
              $ref: '#/components/schemas/Money'
            externalReference:
              type: string
              description: |
                Reference in external system.
              example: "REF123456"
            userDescription:
              type: string
              description: |
                Custom description set by the user.
              example: "Monthly rent"
            postTransactionBalance:
              $ref: '#/components/schemas/Money'
            exchangeRate:
              type: string
              description: |
                Exchange rate for currency conversions.
              example: "1.3245"
            statusReason:
              type: string
              description: |
                Reason for the current status.
              example: "Transaction processed successfully"
            canceledAt:
              type: string
              format: date-time
              description: |
                When the transaction was canceled, if applicable.
              example: "2023-03-26T10:32:00Z"
            failureReason:
              type: string
              description: |
                Reason for failure, if applicable.
              example: "Insufficient funds"
            retryCount:
              type: integer
              description: |
                Number of retry attempts, if applicable.
              example: 0
            counterpartyDetails:
              type: object
              description: |
                Details about the counterparty.
              properties:
                accountId:
                  type: string
                  format: uuid
                  description: |
                    Account ID of the counterparty, if internal.
                  example: "e47ac10b-58cc-4372-a567-0e02b2c3d479"
                accountNumber:
                  type: string
                  description: |
                    Account number of the counterparty.
                  example: "0987654321"
                name:
                  type: string
                  description: |
                    Name of the counterparty.
                  example: "Jane Smith"
                reference:
                  type: string
                  description: |
                    Reference provided by the counterparty.
                  example: "INV12345"
                bankCode:
                  type: string
                  description: |
                    Bank code of the counterparty.
                  example: "FNBUS33"
            payeeId:
              type: string
              format: uuid
              description: |
                ID of the associated payee, if applicable.
              example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
            paymentDetails:
              type: object
              description: |
                Details about the payment method.
              properties:
                method:
                  type: string
                  enum: ["cash", "card", "bank", "mobile", "check", "wallet", "crypto"]
                  description: |
                    Payment method used.
                  example: "bank"
                gateway:
                  type: string
                  description: |
                    Payment gateway used, if applicable.
                  example: "ACH"
                cardLastFour:
                  type: string
                  description: |
                    Last four digits of card, if applicable.
                  example: "1234"
                checkNumber:
                  type: string
                  description: |
                    Check number, if applicable.
                  example: "567890"
            location:
              type: object
              description: |
                Location where the transaction occurred.
              properties:
                latitude:
                  type: number
                  format: double
                  description: |
                    Latitude coordinate.
                  example: 40.7128
                longitude:
                  type: number
                  format: double
                  description: |
                    Longitude coordinate.
                  example: -74.0060
                address:
                  type: string
                  description: |
                    Human-readable address.
                  example: "123 Broadway"
                city:
                  type: string
                  description: |
                    City name.
                  example: "New York"
                country:
                  type: string
                  description: |
                    Country code (ISO 3166-1 alpha-2).
                  example: "US"
            deviceInfo:
              type: object
              description: |
                Information about the device used for the transaction.
              properties:
                deviceId:
                  type: string
                  description: |
                    Device identifier.
                  example: "D789-XYZ-123456"
                deviceType:
                  type: string
                  description: |
                    Type of device.
                  example: "mobile"
                deviceModel:
                  type: string
                  description: |
                    Model of device.
                  example: "iPhone 13"
                operatingSystem:
                  type: string
                  description: |
                    Operating system and version.
                  example: "iOS 15.4"
                appVersion:
                  type: string
                  description: |
                    App version used.
                  example: "2.1.5"
            fees:
              type: object
              description: |
                Details about fees charged.
              properties:
                fee:
                  $ref: '#/components/schemas/Money'
                tax:
                  $ref: '#/components/schemas/Money'
                feeType:
                  type: string
                  description: |
                    Type of fee.
                  example: "transfer_fee"
                feeIncluded:
                  type: boolean
                  description: |
                    Whether the fee is included in the amount.
                  example: false
            merchantInfo:
              type: object
              description: |
                Information about the merchant, if applicable.
              properties:
                name:
                  type: string
                  description: |
                    Merchant name.
                  example: "Acme Store"
                category:
                  type: string
                  description: |
                    Merchant category code (MCC).
                  example: "5411"
                categoryDescription:
                  type: string
                  description: |
                    Human-readable category description.
                  example: "Grocery Stores"
            transferId:
              type: string
              format: uuid
              description: |
                ID of the associated transfer, if applicable.
              example: "g47ac10b-58cc-4372-a567-0e02b2c3d479"
            billPaymentId:
              type: string
              format: uuid
              description: |
                ID of the associated bill payment, if applicable.
              example: "k47ac10b-58cc-4372-a567-0e02b2c3d479"
            complianceInfo:
              type: object
              description: |
                Compliance-related information.
              properties:
                isSuspicious:
                  type: boolean
                  description: |
                    Whether the transaction is flagged as suspicious.
                  example: false
                flags:
                  type: array
                  description: |
                    Compliance flags, if any.
                  items:
                    type: object
                    properties:
                      flagCode:
                        type: string
                        description: |
                          Code for the flag.
                        example: "LARGE_AMOUNT"
                      description:
                        type: string
                        description: |
                          Description of the flag.
                        example: "Transaction amount exceeds customer's usual pattern"
                      severity:
                        type: string
                        enum: ["high", "medium", "low"]
                        description: |
                          Severity of the flag.
                        example: "medium"
                needsReview:
                  type: boolean
                  description: |
                    Whether the transaction needs manual review.
                  example: false
                reviewedBy:
                  type: string
                  description: |
                    Who reviewed the transaction, if applicable.
                  example: "John Supervisor"
                reviewedAt:
                  type: string
                  format: date-time
                  description: |
                    When the transaction was reviewed, if applicable.
                  example: "2023-03-26T11:00:00Z"
            createdAt:
              type: string
              format: date-time
              description: |
                When the transaction record was created.
              example: "2023-03-26T10:30:00Z"
            updatedAt:
              type: string
              format: date-time
              description: |
                When the transaction was last updated.
              example: "2023-03-26T10:35:00Z"

    TransactionsListResponse:
      type: object
      description: |
        List of transactions.
      required:
        - transactions
        - pagination
      properties:
        transactions:
          type: array
          description: |
            List of transactions.
          items:
            $ref: '#/components/schemas/TransactionResponse'
        pagination:
          $ref: '#/components/schemas/PaginationMetadata'

    TransactionReceiptResponse:
      type: object
      description: |
        Transaction receipt information for display or printing.
      required:
        - transaction
        - bankInfo
      properties:
        transaction:
          allOf:
            - $ref: '#/components/schemas/TransactionDetailResponse'
        bankInfo:
          type: object
          description: |
            Information about the bank for the receipt.
          properties:
            name:
              type: string
              description: |
                Name of the bank.
              example: "SDGT Banking"
            logo:
              type: string
              format: uri
              description: |
                URL to the bank logo.
              example: "https://api.sdgtbanking.com/assets/logo.png"
            contactInfo:
              type: string
              description: |
                Contact information for the bank.
              example: "Customer Support: +1-800-123-4567"
            disclaimer:
              type: string
              description: |
                Legal disclaimer for the receipt.
              example: "This receipt is for informational purposes only and is not a legal proof of payment."
        receiptNumber:
          type: string
          description: |
            Unique receipt number.
          example: "REC20230326001"
        generateTime:
          type: string
          format: date-time
          description: |
            When this receipt was generated.
          example: "2023-03-26T15:45:00Z"

    #-------------------------------
    # Bill Schemas
    #-------------------------------
    BillCreationRequest:
      type: object
      description: |
        Request to create a new bill.
      required:
        - payeeId
        - name
        - amount
        - currencyCode
        - dueDate
        - category
      properties:
        payeeId:
          type: string
          format: uuid
          description: |
            ID of the payee for this bill.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        name:
          type: string
          description: |
            Name of the bill.
          example: "Electricity Bill"
          minLength: 1
          maxLength: 100
        description:
          type: string
          description: |
            Additional description or notes.
          example: "Monthly electricity bill for apartment 4B"
          maxLength: 255
        amount:
          type: string
          description: |
            Amount of the bill as a string to preserve precision.
          example: "85.40"
        currencyCode:
          type: string
          description: |
            Currency code for the bill (ISO 4217).
          example: "USD"
          minLength: 3
          maxLength: 3
        minimumAmount:
          type: string
          description: |
            Minimum payment amount, if applicable.
          example: "25.00"
        dueDate:
          type: string
          format: date
          description: |
            When the bill is due.
          example: "2023-04-15"
        graceDate:
          type: string
          format: date
          description: |
            Last date to pay without penalties, if different from due date.
          example: "2023-04-20"
        category:
          type: string
          enum: ["utility", "rent", "mortgage", "insurance", "subscription", "creditCard", "loan", "telecom", "education", "healthcare", "tax", "other"]
          description: |
            Category for the bill.
          example: "utility"
        isRecurring:
          type: boolean
          description: |
            Whether this is a recurring bill.
          example: true
          default: false
        recurrence:
          type: object
          description: |
            Recurrence pattern, required if isRecurring is true.
          properties:
            frequency:
              type: string
              enum: ["daily", "weekly", "monthly", "quarterly", "annual", "custom"]
              description: |
                How often the bill recurs.
              example: "monthly"
            interval:
              type: integer
              description: |
                Interval between recurrences.
              example: 1
              minimum: 1
            dayOfMonth:
              type: integer
              description: |
                Day of month for monthly recurrence.
              example: 15
              minimum: 1
              maximum: 31
            daysOfWeek:
              type: array
              description: |
                Days of week for weekly recurrence.
              items:
                type: integer
                minimum: 0
                maximum: 6
              example: [1, 4]
            endDate:
              type: string
              format: date
              description: |
                When recurrence should end, if applicable.
              example: "2023-12-31"
        remindersEnabled:
          type: boolean
          description: |
            Whether to enable reminders for this bill.
          example: true
          default: false
        reminders:
          type: array
          description: |
            Reminder schedule, required if remindersEnabled is true.
          items:
            type: object
            properties:
              daysBefore:
                type: integer
                description: |
                  How many days before the due date to send the reminder.
                example: 3
                minimum: 1
              notificationMethods:
                type: array
                description: |
                  Methods to use for the reminder.
                items:
                  type: string
                  enum: ["email", "sms", "push"]
                example: ["email", "push"]

    BillUpdateRequest:
      type: object
      description: |
        Request to update an existing bill.
      properties:
        name:
          type: string
          description: |
            Updated name of the bill.
          example: "City Power & Light Bill"
          minLength: 1
          maxLength: 100
        description:
          type: string
          description: |
            Updated description or notes.
          example: "Monthly electricity and gas bill for apartment 4B"
          maxLength: 255
        amount:
          type: string
          description: |
            Updated amount of the bill.
          example: "95.75"
        minimumAmount:
          type: string
          description: |
            Updated minimum payment amount.
          example: "30.00"
        dueDate:
          type: string
          format: date
          description: |
            Updated due date.
          example: "2023-04-20"
        graceDate:
          type: string
          format: date
          description: |
            Updated grace date.
          example: "2023-04-25"
        category:
          type: string
          enum: ["utility", "rent", "mortgage", "insurance", "subscription", "creditCard", "loan", "telecom", "education", "healthcare", "tax", "other"]
          description: |
            Updated category.
          example: "utility"
        isRecurring:
          type: boolean
          description: |
            Updated recurring status.
          example: true
        recurrence:
          type: object
          description: |
            Updated recurrence pattern.
          properties:
            frequency:
              type: string
              enum: ["daily", "weekly", "monthly", "quarterly", "annual", "custom"]
              description: |
                Updated frequency.
              example: "monthly"
            interval:
              type: integer
              description: |
                Updated interval.
              example: 1
              minimum: 1
            dayOfMonth:
              type: integer
              description: |
                Updated day of month.
              example: 20
              minimum: 1
              maximum: 31
            endDate:
              type: string
              format: date
              description: |
                Updated end date.
              example: "2024-04-20"
        remindersEnabled:
          type: boolean
          description: |
            Updated reminder status.
          example: true
        reminders:
          type: array
          description: |
            Updated reminder schedule.
          items:
            type: object
            properties:
              daysBefore:
                type: integer
                description: |
                  Updated days before due date.
                example: 5
                minimum: 1
              notificationMethods:
                type: array
                description: |
                  Updated notification methods.
                items:
                  type: string
                  enum: ["email", "sms", "push"]
                example: ["email", "sms", "push"]

    BillPaymentRequest:
      type: object
      description: |
        Request to pay a bill.
      required:
        - accountId
        - amount
      properties:
        accountId:
          type: string
          format: uuid
          description: |
            ID of the account to pay from.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        amount:
          type: string
          description: |
            Amount to pay as a string to preserve precision.
          example: "85.40"
        reference:
          type: string
          description: |
            Customer reference for the payment.
          example: "April 2023 Electricity Bill"
          maxLength: 140
        scheduledDate:
          type: string
          format: date-time
          description: |
            When to make the payment, if not immediately.
          example: "2023-04-15T10:00:00Z"

    AutopayRequest:
      type: object
      description: |
        Request to set up automatic bill payment.
      required:
        - isAutoPay
        - defaultAccountId
      properties:
        isAutoPay:
          type: boolean
          description: |
            Whether to enable automatic payment.
          example: true
        defaultAccountId:
          type: string
          format: uuid
          description: |
            ID of the account to use for automatic payments.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        daysBefore:
          type: integer
          description: |
            How many days before the due date to make the payment.
          example: 1
          minimum: 0
          default: 0
        timing:
          type: string
          enum: ["onDueDate", "beforeDueDate", "afterDueDate", "specificDay"]
          description: |
            When to make the payment relative to the due date.
          example: "beforeDueDate"
          default: "onDueDate"
        autoPayAmount:
          type: string
          description: |
            Amount to pay automatically, if not the full amount.
          example: "85.40"
        autoPayAmountType:
          type: string
          enum: ["fullAmount", "minimumDue", "customAmount", "availableBalance"]
          description: |
            How to determine the payment amount.
          example: "fullAmount"
          default: "fullAmount"

    BillResponse:
      type: object
      description: |
        Basic bill information.
      required:
        - id
        - billNumber
        - customerId
        - payeeId
        - name
        - amount
        - dueDate
        - category
        - status
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for the bill.
          example: "k47ac10b-58cc-4372-a567-0e02b2c3d479"
        billNumber:
          type: string
          description: |
            Human-readable bill reference number.
          example: "BILL20230401001"
        customerId:
          type: string
          format: uuid
          description: |
            ID of the customer who owns this bill.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        payeeId:
          type: string
          format: uuid
          description: |
            ID of the payee for this bill.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        payeeName:
          type: string
          description: |
            Name of the payee.
          example: "City Power & Light"
        name:
          type: string
          description: |
            Name of the bill.
          example: "Electricity Bill"
        description:
          type: string
          description: |
            Additional description or notes.
          example: "Monthly electricity bill for apartment 4B"
        amount:
          $ref: '#/components/schemas/Money'
        minimumAmount:
          $ref: '#/components/schemas/Money'
        dueDate:
          type: string
          format: date
          description: |
            When the bill is due.
          example: "2023-04-15"
        graceDate:
          type: string
          format: date
          description: |
            Last date to pay without penalties.
          example: "2023-04-20"
        category:
          type: string
          enum: ["utility", "rent", "mortgage", "insurance", "subscription", "creditCard", "loan", "telecom", "education", "healthcare", "tax", "other"]
          description: |
            Category for the bill.
          example: "utility"
        status:
          type: string
          enum: ["upcoming", "due", "overdue", "paid", "partiallypaid", "cancelled", "disputed"]
          description: |
            Current status of the bill.
          example: "upcoming"
        isAutoPay:
          type: boolean
          description: |
            Whether automatic payment is enabled.
          example: false
        lastPaidDate:
          type: string
          format: date-time
          description: |
            When the bill was last paid, if applicable.
          example: "2023-03-15T10:30:00Z"
        lastPaymentAmount:
          $ref: '#/components/schemas/Money'
        nextPaymentDate:
          type: string
          format: date-time
          description: |
            When the next payment is scheduled, if applicable.
          example: "2023-04-15T10:00:00Z"
        isRecurring:
          type: boolean
          description: |
            Whether this is a recurring bill.
          example: true
        createdAt:
          type: string
          format: date-time
          description: |
            When the bill record was created.
          example: "2023-04-01T09:00:00Z"
        updatedAt:
          type: string
          format: date-time
          description: |
            When the bill was last updated.
          example: "2023-04-01T09:00:00Z"

    BillDetailResponse:
      type: object
      description: |
        Detailed bill information.
      allOf:
        - $ref: '#/components/schemas/BillResponse'
        - type: object
          properties:
            autopaySettings:
              type: object
              description: |
                Automatic payment settings, if enabled.
              properties:
                defaultAccountId:
                  type: string
                  format: uuid
                  description: |
                    ID of the account used for automatic payments.
                  example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
                defaultAccountNumber:
                  type: string
                  description: |
                    Account number used for automatic payments.
                  example: "1234567890"
                daysBefore:
                  type: integer
                  description: |
                    How many days before the due date the payment is made.
                  example: 1
                timing:
                  type: string
                  enum: ["onDueDate", "beforeDueDate", "afterDueDate", "specificDay"]
                  description: |
                    When the payment is made relative to the due date.
                  example: "beforeDueDate"
                autoPayAmount:
                  $ref: '#/components/schemas/Money'
                autoPayAmountType:
                  type: string
                  enum: ["fullAmount", "minimumDue", "customAmount", "availableBalance"]
                  description: |
                    How the payment amount is determined.
                  example: "fullAmount"
            recurrenceSettings:
              type: object
              description: |
                Recurrence settings, if this is a recurring bill.
              properties:
                frequency:
                  type: string
                  enum: ["daily", "weekly", "monthly", "quarterly", "annual", "custom"]
                  description: |
                    How often the bill recurs.
                  example: "monthly"
                interval:
                  type: integer
                  description: |
                    Interval between recurrences.
                  example: 1
                dayOfMonth:
                  type: integer
                  description: |
                    Day of month for monthly recurrence.
                  example: 15
                daysOfWeek:
                  type: array
                  description: |
                    Days of week for weekly recurrence.
                  items:
                    type: integer
                  example: [1, 4]
                endDate:
                  type: string
                  format: date
                  description: |
                    When recurrence ends, if applicable.
                  example: "2023-12-31"
            reminderSettings:
              type: object
              description: |
                Reminder settings.
              properties:
                remindersEnabled:
                  type: boolean
                  description: |
                    Whether reminders are enabled.
                  example: true
                reminders:
                  type: array
                  description: |
                    List of reminder configurations.
                  items:
                    type: object
                    properties:
                      daysBefore:
                        type: integer
                        description: |
                          How many days before the due date to send the reminder.
                        example: 3
                      notificationMethods:
                        type: array
                        description: |
                          Methods used for the reminder.
                        items:
                          type: string
                          enum: ["email", "sms", "push"]
                        example: ["email", "push"]
                      isEnabled:
                        type: boolean
                        description: |
                          Whether this specific reminder is enabled.
                        example: true
            paymentHistory:
              type: array
              description: |
                History of payments for this bill.
              items:
                type: object
                properties:
                  transactionId:
                    type: string
                    format: uuid
                    description: |
                      ID of the payment transaction.
                    example: "h47ac10b-58cc-4372-a567-0e02b2c3d479"
                  amount:
                    $ref: '#/components/schemas/Money'
                  paymentDate:
                    type: string
                    format: date-time
                    description: |
                      When the payment was made.
                    example: "2023-03-15T10:30:00Z"
                  status:
                    type: string
                    enum: ["pending", "completed", "failed", "canceled"]
                    description: |
                      Status of the payment.
                    example: "completed"
                  reference:
                    type: string
                    description: |
                      Payment reference.
                    example: "March 2023 Electricity Bill"
            daysUntilDue:
              type: integer
              description: |
                Number of days until the bill is due.
              example: 14
            isOverdue:
              type: boolean
              description: |
                Whether the bill is overdue.
              example: false
            isPastGracePeriod:
              type: boolean
              description: |
                Whether the bill is past the grace period.
              example: false

    BillsListResponse:
      type: object
      description: |
        List of bills.
      required:
        - bills
      properties:
        bills:
          type: array
          description: |
            List of bills.
          items:
            $ref: '#/components/schemas/BillResponse'
        upcomingCount:
          type: integer
          description: |
            Number of upcoming bills.
          example: 5
        overdueCount:
          type: integer
          description: |
            Number of overdue bills.
          example: 1
        dueThisWeekCount:
          type: integer
          description: |
            Number of bills due in the next 7 days.
          example: 2
        totalDueAmount:
          $ref: '#/components/schemas/Money'

    #-------------------------------
    # Card Schemas
    #-------------------------------
    CardRequestCreationRequest:
      type: object
      description: |
        Request to create a new card.
      required:
        - accountId
        - type
        - cardholderName
      properties:
        accountId:
          type: string
          format: uuid
          description: |
            ID of the account to link the card to.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        type:
          type: string
          enum: ["debit", "credit", "prepaid", "giftCard", "virtual", "corporate"]
          description: |
            Type of card to create.
          example: "debit"
        cardholderName:
          type: string
          description: |
            Name to appear on the card.
          example: "John R Doe"
          minLength: 1
          maxLength: 26
        isVirtual:
          type: boolean
          description: |
            Whether to create a virtual card.
          example: false
          default: false
        cardDesign:
          type: string
          description: |
            Design or style option for the card.
          example: "standard"
          default: "standard"
        shippingAddress:
          type: object
          description: |
            Where to ship the physical card, if applicable.
          properties:
            addressLine1:
              type: string
              description: |
                Street address, first line.
              example: "123 Main St"
              minLength: 1
            addressLine2:
              type: string
              description: |
                Street address, second line.
              example: "Apt 4B"
            city:
              type: string
              description: |
                City name.
              example: "New York"
              minLength: 1
            stateProvince:
              type: string
              description: |
                State, province, or region.
              example: "NY"
              minLength: 1
            postalCode:
              type: string
              description: |
                Postal or ZIP code.
              example: "10001"
              minLength: 1
            country:
              type: string
              description: |
                Country code (ISO 3166-1 alpha-2).
              example: "US"
              minLength: 2
              maxLength: 2

    CardRequestResponse:
      type: object
      description: |
        Response for a card request.
      required:
        - id
        - accountId
        - type
        - status
        - requestDate
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for the card request.
          example: "l47ac10b-58cc-4372-a567-0e02b2c3d479"
        accountId:
          type: string
          format: uuid
          description: |
            ID of the linked account.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        accountNumber:
          type: string
          description: |
            Account number of the linked account.
          example: "1234567890"
        type:
          type: string
          enum: ["debit", "credit", "prepaid", "giftCard", "virtual", "corporate"]
          description: |
            Type of card.
          example: "debit"
        cardholderName:
          type: string
          description: |
            Name to appear on the card.
          example: "John R Doe"
        isVirtual:
          type: boolean
          description: |
            Whether this is a virtual card.
          example: false
        cardDesign:
          type: string
          description: |
            Design or style option for the card.
          example: "standard"
        status:
          type: string
          enum: ["pending", "approved", "rejected", "processed", "shipped", "delivered", "canceled"]
          description: |
            Current status of the card request.
          example: "pending"
        cardId:
          type: string
          format: uuid
          description: |
            ID of the created card, once processed.
          example: "m47ac10b-58cc-4372-a567-0e02b2c3d479"
        requestDate:
          type: string
          format: date-time
          description: |
            When the card was requested.
          example: "2023-03-27T09:00:00Z"
        approvedDate:
          type: string
          format: date-time
          description: |
            When the request was approved, if applicable.
          example: "2023-03-27T09:30:00Z"
        processedDate:
          type: string
          format: date-time
          description: |
            When the card was processed, if applicable.
          example: "2023-03-28T10:00:00Z"
        shippedDate:
          type: string
          format: date-time
          description: |
            When the card was shipped, if applicable.
          example: "2023-03-29T11:00:00Z"
        estimatedDeliveryDate:
          type: string
          format: date
          description: |
            Estimated delivery date, if applicable.
          example: "2023-04-02"
        trackingNumber:
          type: string
          description: |
            Shipping tracking number, if applicable.
          example: "1Z999AA10123456784"
        shippingCarrier:
          type: string
          description: |
            Shipping carrier name, if applicable.
          example: "UPS"

    CardActivationRequest:
      type: object
      description: |
        Request to activate a card.
      required:
        - activationCode
      properties:
        activationCode:
          type: string
          description: |
            Code provided with the card for activation.
          example: "123456"
          minLength: 6
          maxLength: 10
        last4Digits:
          type: string
          description: |
            Last 4 digits of the card number, for verification.
          example: "1234"
          minLength: 4
          maxLength: 4

    CardBlockRequest:
      type: object
      description: |
        Request to block a card.
      required:
        - reason
      properties:
        reason:
          type: string
          enum: ["lost", "stolen", "damaged", "suspicious", "other"]
          description: |
            Reason for blocking the card.
          example: "lost"
        details:
          type: string
          description: |
            Additional details about the block reason.
          example: "Left card in restaurant"
          maxLength: 255

    CardReplaceRequest:
      type: object
      description: |
        Request to replace a card.
      required:
        - reason
      properties:
        reason:
          type: string
          enum: ["lost", "stolen", "damaged", "expired", "compromised", "worn", "other"]
          description: |
            Reason for replacing the card.
          example: "damaged"
        details:
          type: string
          description: |
            Additional details about the replacement reason.
          example: "Card is cracked and doesn't work in ATM"
          maxLength: 255
        rushDelivery:
          type: boolean
          description: |
            Whether to expedite delivery.
          example: false
          default: false
        shippingAddress:
          type: object
          description: |
            Where to ship the replacement card.
          properties:
            addressLine1:
              type: string
              description: |
                Street address, first line.
              example: "123 Main St"
            addressLine2:
              type: string
              description: |
                Street address, second line.
              example: "Apt 4B"
            city:
              type: string
              description: |
                City name.
              example: "New York"
            stateProvince:
              type: string
              description: |
                State, province, or region.
              example: "NY"
            postalCode:
              type: string
              description: |
                Postal or ZIP code.
              example: "10001"
            country:
              type: string
              description: |
                Country code (ISO 3166-1 alpha-2).
              example: "US"

    CardDetailResponse:
      type: object
      description: |
        Detailed card information.
      required:
        - id
        - maskedCardNumber
        - last4
        - customerId
        - accountId
        - cardholderName
        - type
        - network
        - status
        - expiryDate
        - issuedDate
        - createdAt
      properties:
        id:
          type: string
          format: uuid
          description: |
            Unique identifier for the card.
          example: "m47ac10b-58cc-4372-a567-0e02b2c3d479"
        maskedCardNumber:
          type: string
          description: |
            Masked card number for display.
          example: "   1234"
        last4:
          type: string
          description: |
            Last 4 digits of the card number.
          example: "1234"
        customerId:
          type: string
          format: uuid
          description: |
            ID of the card owner.
          example: "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        accountId:
          type: string
          format: uuid
          description: |
            ID of the linked account.
          example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
        accountNumber:
          type: string
          description: |
            Account number of the linked account.
          example: "1234567890"
        cardholderName:
          type: string
          description: |
            Name on the card.
          example: "John R Doe"
        type:
          type: string
          enum: ["debit", "credit", "prepaid", "giftCard", "virtual", "corporate"]
          description: |
            Type of card.
          example: "debit"
        network:
          type: string
          enum: ["visa", "mastercard", "amex", "discover", "unionpay", "dinersclub", "jcb", "rupay"]
          description: |
            Card network.
          example: "visa"
        productName:
          type: string
          description: |
            Product name for the card.
          example: "Premium Debit Card"
        status:
          type: string
          enum: ["active", "inactive", "blocked", "suspended", "expired", "pendingActivation", "canceled", "stolen", "lost", "damaged"]
          description: |
            Current status of the card.
          example: "active"
        currency:
          type: string
          description: |
            Currency code of the card (ISO 4217).
          example: "USD"
          minLength: 3
          maxLength: 3
        expiryDate:
          type: string
          format: date
          description: |
            When the card expires.
          example: "2026-03-31"
        isContactless:
          type: boolean
          description: |
            Whether the card supports contactless payments.
          example: true
        isVirtual:
          type: boolean
          description: |
            Whether this is a virtual card.
          example: false
        is3DSecureEnabled:
          type: boolean
          description: |
            Whether 3D Secure is enabled for online transactions.
          example: true
        cardDesign:
          type: string
          description: |
            Design or style of the card.
          example: "standard"
        pinIsSet:
          type: boolean
          description: |
            Whether a PIN has been set for the card.
          example: true
        allowOnlineTransactions:
          type: boolean
          description: |
            Whether online transactions are allowed.
          example: true
        allowInternationalTransactions:
          type: boolean
          description: |
            Whether international transactions are allowed.
          example: false
        allowAtmWithdrawals:
          type: boolean
          description: |
            Whether ATM withdrawals are allowed.
          example: true
        allowContactlessPayments:
          type: boolean
          description: |
            Whether contactless payments are allowed.
          example: true
        blockedMerchantCategories:
          type: array
          description: |
            Categories of merchants that are blocked.
          items:
            type: string
          example: ["gambling", "adult"]
        blockedCountries:
          type: array
          description: |
            Countries where the card is blocked (ISO 3166-1 alpha-2).
          items:
            type: string
          example: ["RU", "BY"]
        issuedDate:
          type: string
          format: date-time
          description: |
            When the card was issued.
          example: "2023-03-28T10:00:00Z"
        activatedDate:
          type: string
          format: date-time
          description: |
            When the card was activated.
          example: "2023-03-30T15:45:00Z"
        isTokenized:
          type: boolean
          description: |
            Whether the card has been added to a digital wallet.
          example: false
        digitalWallets:
          type: array
          description: |
            Digital wallets where the card has been added.
          items:
            type: object
            properties:
              walletType:
                type: string
                enum: ["apple", "google", "samsung", "other"]
                description: |
                  Type of digital wallet.
                example: "apple"
              deviceName:
                type: string
                description: |
                  Name of the device where the wallet is installed.
                example: "John's iPhone"
              tokenizedAt:
                type: string
                format: date-time
                description: |
                  When the card was added to the wallet.
                example: "2023-04-01T09:30:00Z"
              status:
                type: string
                enum: ["active", "suspended", "revoked"]
                description: |
                  Status of the tokenized card.
                example: "active"
        createdAt:
          type: string
          format: date-time
          description: |
            When the card record was created.
          example: "2023-03-28T10:00:00Z"
        updatedAt:
          type: string
          format: date-time
          description: |
            When the card was last updated.
          example: "2023-03-30T15:45:00Z"

    CardsListResponse:
      type: object
      description: |
        List of cards.
      required:
        - cards
      properties:
        cards:
          type: array
          description: |
            List of cards.
          items:
            type: object
            allOf:
              - type: object
                required:
                  - id
                  - maskedCardNumber
                  - last4
                  - accountId
                  - cardholderName
                  - type
                  - network
                  - status
                  - expiryDate
                properties:
                  id:
                    type: string
                    format: uuid
                    description: |
                      Unique identifier for the card.
                    example: "m47ac10b-58cc-4372-a567-0e02b2c3d479"
                  maskedCardNumber:
                    type: string
                    description: |
                      Masked card number for display.
                    example: "   1234"
                  last4:
                    type: string
                    description: |
                      Last 4 digits of the card number.
                    example: "1234"
                  accountId:
                    type: string
                    format: uuid
                    description: |
                      ID of the linked account.
                    example: "d47ac10b-58cc-4372-a567-0e02b2c3d479"
                  accountNumber:
                    type: string
                    description: |
                      Account number of the linked account.
                    example: "1234567890"
                  cardholderName:
                    type: string
                    description: |
                      Name on the card.
                    example: "John R Doe"
                  type:
                    type: string
                    enum: ["debit", "credit", "prepaid", "giftCard", "virtual", "corporate"]
                    description: |
                      Type of card.
                    example: "debit"
                  network:
                    type: string
                    enum: ["visa", "mastercard", "amex", "discover", "unionpay", "dinersclub", "jcb", "rupay"]
                    description: |
                      Card network.
                    example: "visa"
                  status:
                    type: string
                    enum: ["active", "inactive", "blocked", "suspended", "expired", "pendingActivation", "canceled", "stolen", "lost", "damaged"]
                    description: |
                      Current status of the card.
                    example: "active"
                  expiryDate:
                    type: string
                    format: date
                    description: |
                      When the card expires.
                    example: "2026-03-31"
                  isVirtual:
                    type: boolean
                    description: |
                      Whether this is a virtual card.
                    example: false
                  issuedDate:
                    type: string
                    format: date-time
                    description: |
                      When the card was issued.
                    example: "2023-03-28T10:00:00Z"

    CardLimitsResponse:
      type: object
      description: |
        Card spending limits information.
      required:
        - cardId
        - limits
      properties:
        cardId:
          type: string
          format: uuid
          description: |
            Unique identifier for the card.
          example: "m47ac10b-58cc-4372-a567-0e02b2c3d479"
        limits:
          type: array
          description: |
            List of spending limits.
          items:
            type: object
            required:
              - limitType
              - amount
              - currencyCode
            properties:
              limitType:
                type: string
                enum: ["daily", "weekly", "monthly", "perTransaction", "atmWithdrawal", "onlineTransaction", "internationalTransaction"]
                description: |
                  Type of limit.
                example: "daily"
              amount:
                type: string
                description: |
                  Limit amount as a string to preserve precision.
                example: "1000.00"
              currencyCode:
                type: string
                description: |
                  Currency code (ISO 4217).
                example: "USD"
                minLength: 3
                maxLength: 3
              remaining:
                type: string
                description: |
                  Remaining amount for time-based limits.
                example: "750.50"
              resetDate:
                type: string
                format: date-time
                description: |
                  When the limit will reset for time-based limits.
                example: "2023-04-01T00:00:00Z"

    CardLimitsUpdateRequest:
      type: object
      description: |
        Request to update card spending limits.
      required:
        - limits
      properties:
        limits:
          type: array
          description: |
            List of limits to update.
          items:
            type: object
            required:
              - limitType
              - amount
            properties:
              limitType:
                type: string
                enum: ["daily", "weekly", "monthly", "perTransaction", "atmWithdrawal", "onlineTransaction", "internationalTransaction"]
                description: |
                  Type of limit to update.
                example: "daily"
              amount:
                type: string
                description: |
                  New limit amount as a string to preserve precision.
                example: "2000.00"

    CardPinRequest:
      type: object
      description: |
        Request to set or change a card PIN.
      required:
        - pin
      properties:
        pin:
          type: string
          format: password
          description: |
            New PIN for the card. Must be 4-6 digits.
          example: "1234"
          minLength: 4
          maxLength: 6
          pattern: "^\\d{4,6}$"
        currentPin:
          type: string
          format: password
          description: |
            Current PIN, required when changing an existing PIN.
          example: "5678"
          minLength: 4
          maxLength: 6
          pattern: "^\\d{4,6}$"